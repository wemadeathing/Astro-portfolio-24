---
type CaseStudy = {
  title: string;
  subtitle: string;
  context: { role: string; duration: string; challenge: string };
  approach: { steps: { phase: string; description: string; deliverables: string[] }[] };
  solution: { features: string[]; tech: string[] };
  impact: { metrics: { value: string; label: string; description: string }[] };
  images: string[];
  overview: string[];
};

interface Props {
  caseNumber: string;
  caseStudy: CaseStudy;
  metaLeftLabel: string;
  metaRightLabel: string;
  stackLabel: string;
  visualsAlt: string;
}

const { caseNumber, caseStudy, metaLeftLabel, metaRightLabel, stackLabel, visualsAlt } = Astro.props;
---

<!-- Title slide -->
<section>
  <div class="min-h-[100dvh] w-full flex items-center justify-center px-8 pt-6 pb-40">
    <div class="w-full max-w-[1100px] text-center">
      <div class="mx-auto max-w-[80ch]">
        <div class="type-kicker text-white/50 mb-3">Case study {caseNumber}</div>
        <h2 class="type-h1 text-white/95">{caseStudy.title}</h2>
        <div class="mt-3 text-sm text-primary/90 font-semibold">
          {caseStudy.subtitle}
        </div>

        <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-[900px] mx-auto">
          <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-5 text-center">
            <div class="text-xs tracking-[0.22em] uppercase text-white/45 mb-2">{metaLeftLabel}</div>
            <div class="text-sm sm:text-base text-white/80 leading-[1.65]">
              {caseStudy.context.role}
            </div>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-5 text-center">
            <div class="text-xs tracking-[0.22em] uppercase text-white/45 mb-2">{metaRightLabel}</div>
            <div class="text-sm sm:text-base text-white/80 leading-[1.65]">
              {caseStudy.context.duration}
            </div>
          </div>
        </div>

        <div class="mt-4 rounded-2xl border border-primary/25 bg-primary/10 p-6 max-w-[900px] mx-auto">
          <div class="type-kicker text-primary/80 mb-2">Challenge</div>
          <div class="text-sm sm:text-base leading-[1.7] text-white/80">
            {caseStudy.context.challenge}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Approach -->
<section>
  <div class="min-h-[100dvh] w-full flex items-center justify-center px-8 pt-6 pb-40">
    <div class="w-full max-w-[1300px]">
      <div class="text-center mb-10">
        <div class="type-kicker text-white/50 mb-3">{caseStudy.title}</div>
        <h2 class="type-h2 text-white/90">Approach and process</h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {caseStudy.approach.steps.map((step, index) => (
          <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-6 backdrop-blur-xl text-left">
            <div class="flex items-center justify-between">
              <div class="text-xs tracking-[0.22em] uppercase text-white/45">Step</div>
              <div class="inline-flex h-8 items-center rounded-full border border-white/10 bg-white/5 px-3 text-xs text-white/65">
                {index + 1}
              </div>
            </div>
            <div class="mt-4 text-lg font-semibold text-white/92">{step.phase}</div>
            <div class="mt-2 text-sm leading-[1.65] text-white/70">{step.description}</div>
            <div class="mt-4 space-y-2">
              {step.deliverables.map((deliverable) => (
                <div class="flex items-start gap-3 text-sm text-white/65">
                  <div class="mt-2 w-2 h-2 rounded-full bg-primary/70"></div>
                  <div class="leading-[1.6]">{deliverable}</div>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<!-- Solution -->
<section>
  <div class="min-h-[100dvh] w-full flex items-center justify-center px-8 pt-6 pb-40">
    <div class="w-full max-w-[1300px]">
      <div class="text-center mb-10">
        <div class="type-kicker text-white/50 mb-3">{caseStudy.title}</div>
        <h2 class="type-h2 text-white/90">Solution</h2>
      </div>

      <div class="mx-auto w-full max-w-[1200px] grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-7 backdrop-blur-xl text-left">
          <div class="text-[11px] tracking-[0.22em] uppercase text-white/45 mb-3 text-left">Overview</div>
          <p class="text-sm sm:text-base leading-[1.75] text-white/75 text-left">
            {caseStudy.overview?.[0] ?? ''}
          </p>
          <p class="mt-4 text-sm sm:text-base leading-[1.75] text-white/75 text-left">
            {caseStudy.overview?.[1] ?? ''}
          </p>
        </div>

        <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-7 backdrop-blur-xl text-left">
          <div class="text-[11px] tracking-[0.22em] uppercase text-white/45 mb-3 text-left">What shipped</div>
          <div class="space-y-3">
            {caseStudy.solution.features.map((feature) => (
              <div class="flex items-start gap-3 text-white/75">
                <div class="mt-2 w-2 h-2 rounded-full bg-primary/70"></div>
                <div class="text-sm sm:text-base leading-[1.7]">{feature}</div>
              </div>
            ))}
          </div>

          <div class="mt-6 pt-6 border-t border-white/10">
            <div class="text-[11px] tracking-[0.22em] uppercase text-white/45 mb-3 text-left">{stackLabel}</div>
            <div class="flex flex-wrap gap-2">
              {caseStudy.solution.tech.map((tech) => (
                <span class="inline-flex items-center rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/70">
                  {tech}
                </span>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Impact -->
<section>
  <div class="min-h-[100dvh] w-full flex items-center justify-center px-8 pt-6 pb-40">
    <div class="w-full max-w-[1300px]">
      <div class="text-center mb-10">
        <div class="type-kicker text-white/50 mb-3">{caseStudy.title}</div>
        <h2 class="type-h2 text-white/90">Impact</h2>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        {caseStudy.impact.metrics.map((metric) => (
          <div class="rounded-2xl border border-white/10 bg-white/[0.03] p-6 text-center backdrop-blur-xl">
            <div class="text-4xl font-semibold tracking-[-0.03em] text-primary">{metric.value}</div>
            <div class="mt-2 text-sm font-semibold text-white/85">{metric.label}</div>
            <div class="mt-2 text-sm leading-[1.6] text-white/60">{metric.description}</div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<!-- Visuals -->
<section>
  <div class="min-h-[100dvh] w-full flex items-center justify-center px-8 pt-6 pb-40">
    <div class="w-full max-w-[1300px]">
      <div class="text-center mb-8">
        <div class="type-kicker text-white/50 mb-3">{caseStudy.title}</div>
        <h2 class="type-h2 text-white/90">Visuals</h2>
      </div>

      <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
        {caseStudy.images.slice(0, 6).map((image) => (
          <button
            type="button"
            class="group rounded-3xl border border-white/10 bg-white/[0.03] p-3 backdrop-blur-xl transition-colors hover:bg-white/[0.05] hover:border-white/20"
            data-gallery-item={image}
            aria-label="Open image"
          >
            <img
              src={image}
              alt={visualsAlt}
              class="w-full h-[220px] lg:h-[260px] object-cover rounded-2xl"
              loading="lazy"
              decoding="async"
            />
          </button>
        ))}
      </div>
    </div>
  </div>
</section>

