---
import Layout from '../layouts/Layout.astro';
import ChatInterface from '../components/Chat/ChatInterface';
import { getCollection } from 'astro:content';

const blogPosts = await getCollection('blog');
const latestPost = blogPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())[0];
---

<Layout 
  title="Nasif Salaam | AI-Powered Portfolio"
  description="Talk to my AI assistant to learn about my work, experience, and how I can help you."
  hideNav={true}
  hideFooter={true}
>
  <div class="sr-only">
    <h1>Nasif Salaam - Technical Product Designer & AI Integration Specialist</h1>
    <p>
      I am a Technical Product Designer and AI Integration Specialist with over 15 years of experience.
      I specialize in building enterprise design systems, rapid prototypes, and AI-powered products.
      I am a designer who codes, bridging the gap between design and development.
    </p>
    <h2>Latest Insights</h2>
    <ul>
      {blogPosts.slice(0, 5).map(post => (
        <li><a href={`/blog/${post.slug}`}>{post.data.title}</a></li>
      ))}
    </ul>
    <h2>Core Expertise</h2>
    <ul>
      <li>AI-Accelerated Development</li>
      <li>Enterprise Design Systems</li>
      <li>Rapid Prototyping</li>
      <li>Full-stack Design Engineering</li>
    </ul>
  </div>
  <ChatInterface client:only="react" latestPost={latestPost}>
    <div slot="fallback" class="w-full h-[100dvh] flex flex-col bg-background relative overflow-hidden">
      <!-- Skeleton Nav -->
      <div class="fixed top-4 left-0 right-0 z-40 px-4">
        <div class="max-w-[1100px] mx-auto relative h-14 flex items-center justify-between">
          <div class="w-8 h-8 rounded-full bg-muted/20 animate-pulse"></div>
          <div class="w-10 h-10 rounded-full bg-muted/20 animate-pulse"></div>
        </div>
      </div>
      
      <!-- Skeleton Content -->
      <div class="flex-1 flex flex-col items-center justify-center px-4 w-full max-w-[1100px] mx-auto mt-20">
        <div class="w-2/3 h-10 bg-muted/20 rounded-lg animate-pulse mb-4"></div>
        <div class="w-1/2 h-6 bg-muted/20 rounded-lg animate-pulse mb-8"></div>
        <div class="w-full max-w-[680px] h-14 bg-muted/20 rounded-full animate-pulse"></div>
      </div>
    </div>
  </ChatInterface>
</Layout>
